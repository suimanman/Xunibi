{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  data() {\n    return {\n      users: [],\n      // 用户数据\n      searchQuery: \"\",\n      // 搜索关键词\n      filteredUsers: [],\n      // 筛选后的用户\n      dialogVisible: false,\n      // 控制弹窗显示\n      editMode: false,\n      // 判断是新增还是编辑\n      newUser: {\n        adminId: null,\n        username: \"\",\n        password: \"\"\n      }\n    };\n  },\n  mounted() {\n    this.fetchUsers();\n  },\n  methods: {\n    // 获取用户列表\n    fetchUsers() {\n      axios.get(\"http://localhost:8080/admins/list\", {\n        withCredentials: true\n      }, {\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        }\n      }).then(response => {\n        console.log(\"response : \", response.data);\n        this.users = response.data;\n        this.filteredUsers = this.users;\n      }).catch(error => {\n        console.error(\"获取用户列表失败:\", error);\n      });\n    },\n    // 查询用户\n    search() {\n      this.filteredUsers = this.users.filter(user => user.username.includes(this.searchQuery));\n    },\n    searchByName() {\n      axios.get(`http://localhost:8080/admins/findbyname?username=${this.searchQuery}`, {\n        withCredentials: true,\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        }\n      }).then(response => {\n        this.filteredUsers = response;\n        console.log(\"response : \", response.data);\n      });\n    },\n    // 重置查询\n    reset() {\n      this.searchQuery = \"\";\n      this.filteredUsers = this.users;\n    },\n    // 新增用户\n    handleAdd() {\n      this.newUser = {\n        id: null,\n        username: \"\",\n        password: \"\"\n      };\n      this.editMode = false;\n      this.dialogVisible = true;\n    },\n    // 编辑用户\n    handleEdit(user) {\n      this.newUser = {\n        ...user\n      }; // 深拷贝用户数据\n      this.editMode = true;\n      this.dialogVisible = true;\n    },\n    // 删除用户\n    del(userId) {\n      axios.delete(`http://localhost:8080/admins/delete/${userId}`, {\n        withCredentials: true\n      }).then(() => {\n        this.$message.success(\"删除成功\");\n        this.fetchUsers();\n      }).catch(error => {\n        console.error(\"删除失败:\", error);\n      });\n    },\n    // 保存用户（新增或编辑）\n    saveUser() {\n      if (this.editMode) {\n        // 编辑模式\n        axios.put(`http://localhost:8080/admins/update/${this.newUser.adminId}`, {\n          adminId: this.newUser.adminId,\n          username: this.newUser.username,\n          password: this.newUser.password\n        }, {\n          withCredentials: true,\n          headers: {\n            \"Content-Type\": \"application/json\" // 这里最好使用 \"application/json\"\n          }\n        }).then(() => {\n          this.$message.success(\"编辑成功\");\n          this.dialogVisible = false;\n          this.fetchUsers();\n        }).catch(error => {\n          console.error(\"编辑失败:\", error);\n        });\n      } else {\n        // 新增模式\n        axios.post(\"http://localhost:8080/admins/create\", {\n          username: this.newUser.username,\n          password: this.newUser.password\n        }, {\n          withCredentials: true,\n          headers: {\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n          }\n        }).then(() => {\n          this.$message.success(\"新增成功\");\n          this.dialogVisible = false;\n          this.fetchUsers();\n        }).catch(error => {\n          console.error(\"新增失败:\", error);\n        });\n      }\n    }\n  },\n  mounted() {\n    this.fetchUsers();\n  }\n};","map":{"version":3,"names":["axios","data","users","searchQuery","filteredUsers","dialogVisible","editMode","newUser","adminId","username","password","mounted","fetchUsers","methods","get","withCredentials","headers","then","response","console","log","catch","error","search","filter","user","includes","searchByName","reset","handleAdd","id","handleEdit","del","userId","delete","$message","success","saveUser","put","post"],"sources":["src/views/manage/AdminView.vue"],"sourcesContent":["<template>\n    <div>\n        <div class=\"search\">\n            <el-input v-model=\"searchQuery\" placeholder=\"请输入用户名称查询\" style=\"width: 200px\"></el-input>\n            <el-button type=\"info\" plain style=\"margin-left: 10px\" @click=\"searchByName\">查询</el-button>\n            <el-button type=\"warning\" plain style=\"margin-left: 10px\" @click=\"reset\">重置</el-button>\n            <el-button type=\"primary\" plain @click=\"handleAdd\">新增</el-button>\n        </div>\n        <div class=\"table\">\n            <el-table :data=\"filteredUsers\" border>\n                <el-table-column prop=\"adminId\" label=\"用户ID\" sortable></el-table-column>\n                <el-table-column prop=\"username\" label=\"用户名\"></el-table-column>\n                <el-table-column prop=\"password\" label=\"用户密码\"></el-table-column>\n                <el-table-column label=\"操作\">\n                    <template #default=\"scope\">\n                        <el-button size=\"mini\" type=\"primary\" plain @click=\"handleEdit(scope.row)\">编辑</el-button>\n                        <el-button size=\"mini\" type=\"danger\" plain @click=\"del(scope.row.adminId)\">删除</el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n        </div>\n\n        <el-dialog :title=\"editMode ? '编辑用户' : '新增用户'\" :visible.sync=\"dialogVisible\">\n            <el-form :model=\"newUser\" label-width=\"100px\">\n                <el-form-item label=\"用户名\">\n                    <el-input v-model=\"newUser.username\" placeholder=\"请输入用户名\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"用户密码\">\n                    <el-input v-model=\"newUser.password\" type=\"password\" placeholder=\"请输入密码\"></el-input>\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogVisible = false\">取消</el-button>\n                <el-button type=\"primary\" @click=\"saveUser\">保存</el-button>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n    data() {\n        return {\n            users: [], // 用户数据\n            searchQuery: \"\", // 搜索关键词\n            filteredUsers: [], // 筛选后的用户\n            dialogVisible: false, // 控制弹窗显示\n            editMode: false, // 判断是新增还是编辑\n            newUser: {\n                adminId: null,\n                username: \"\",\n                password: \"\"\n            }\n        };\n    },\n    mounted() {\n        this.fetchUsers()\n\n    },\n    methods: {\n        // 获取用户列表\n        fetchUsers() {\n            axios\n                .get(\"http://localhost:8080/admins/list\", { withCredentials: true }, {\n                    headers: {\n                        \"Content-Type\": \"application/x-www-form-urlencoded\",\n                    },\n                })\n                .then((response) => {\n                    console.log(\"response : \", response.data);\n                    this.users = response.data;\n                    this.filteredUsers = this.users;\n                })\n                .catch((error) => {\n                    console.error(\"获取用户列表失败:\", error);\n                });\n        },\n        // 查询用户\n        search() {\n            this.filteredUsers = this.users.filter((user) =>\n                user.username.includes(this.searchQuery)\n            );\n        },\n        searchByName() {\n            axios\n                .get(`http://localhost:8080/admins/findbyname?username=${this.searchQuery}`,\n                    {\n                        withCredentials: true,\n                        headers: {\n                            \"Content-Type\": \"application/x-www-form-urlencoded\",\n                        },\n                    })\n                .then((response) => {\n                    this.filteredUsers = response;\n                    console.log(\"response : \", response.data);\n                })\n        },\n\n        // 重置查询\n        reset() {\n            this.searchQuery = \"\";\n            this.filteredUsers = this.users;\n        },\n        // 新增用户\n        handleAdd() {\n            this.newUser = { id: null, username: \"\", password: \"\" };\n            this.editMode = false;\n            this.dialogVisible = true;\n        },\n        // 编辑用户\n        handleEdit(user) {\n            this.newUser = { ...user }; // 深拷贝用户数据\n            this.editMode = true;\n            this.dialogVisible = true;\n        },\n        // 删除用户\n        del(userId) {\n            axios\n                .delete(`http://localhost:8080/admins/delete/${userId}`, { withCredentials: true },\n                )\n                .then(() => {\n                    this.$message.success(\"删除成功\");\n                    this.fetchUsers();\n                })\n                .catch((error) => {\n                    console.error(\"删除失败:\", error);\n                });\n        },\n        // 保存用户（新增或编辑）\n        saveUser() {\n            if (this.editMode) {\n                // 编辑模式\n                axios\n                    .put(\n                        `http://localhost:8080/admins/update/${this.newUser.adminId}`,\n                        {\n                            adminId: this.newUser.adminId,\n                            username: this.newUser.username,\n                            password: this.newUser.password\n                        },\n                        {\n                            withCredentials: true,\n                            headers: {\n                                \"Content-Type\": \"application/json\", // 这里最好使用 \"application/json\"\n                            },\n\n\n                        },\n                    )\n                    .then(() => {\n                        this.$message.success(\"编辑成功\");\n                        this.dialogVisible = false;\n                        this.fetchUsers();\n                    })\n                    .catch((error) => {\n                        console.error(\"编辑失败:\", error);\n                    });\n            } else {\n                // 新增模式\n                axios\n                    .post(\n                        \"http://localhost:8080/admins/create\",\n                        {\n                            username: this.newUser.username,\n                            password: this.newUser.password\n                        },\n                        {\n                            withCredentials: true,\n                            headers: {\n                                \"Content-Type\": \"application/x-www-form-urlencoded\",\n                            },\n                        },\n\n                    )\n                    .then(() => {\n                        this.$message.success(\"新增成功\");\n                        this.dialogVisible = false;\n                        this.fetchUsers();\n                    })\n                    .catch((error) => {\n                        console.error(\"新增失败:\", error);\n                    });\n            }\n        }\n    },\n    mounted() {\n        this.fetchUsers();\n    }\n};\n</script>\n\n<style scoped>\n.search {\n    display: flex;\n    align-items: center;\n    margin-bottom: 15px;\n}\n\n.table {\n    border: 1px solid #e0e0e0;\n    border-radius: 5px;\n    background-color: #ffffff;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    padding: 10px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}