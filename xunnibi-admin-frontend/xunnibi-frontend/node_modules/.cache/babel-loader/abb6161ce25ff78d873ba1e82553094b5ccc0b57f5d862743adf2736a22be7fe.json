{"ast":null,"code":"import * as echarts from \"echarts\";\nexport default {\n  props: {\n    // 接收图表的标题、Y轴数据和系列数据\n    chartTitle: {\n      type: String,\n      default: \"各团队人数汇总\"\n    },\n    teamNumsData: {\n      type: Array,\n      required: true\n    }\n  },\n  data() {\n    return {\n      chart: null\n    };\n  },\n  mounted() {\n    this.initChart();\n  },\n  watch: {\n    // 当传入的数据发生变化时，更新图表\n    teamNumsData: \"updateChart\"\n  },\n  methods: {\n    initChart() {\n      const chartDom = this.$refs.chart;\n      this.chart = echarts.init(chartDom);\n      this.updateChart();\n\n      // 监听鼠标事件\n      this.chart.on(\"mouseover\", params => {\n        if (params.componentType === \"series\") {\n          this.$emit(\"highlight-name\", params.name); // 通知父组件\n        }\n      });\n    },\n    updateChart() {\n      // 对 teamNumsData 按人数排序\n\n      const sortedData = [...this.teamNumsData].sort((a, b) => a.personNum - b.personNum);\n\n      // 提取团队名称和人数数据\n      const names = sortedData.map(item => item.name);\n      const personNums = sortedData.map(item => item.personNum);\n      const option = {\n        title: {\n          text: this.chartTitle\n        },\n        tooltip: {\n          trigger: \"axis\",\n          axisPointer: {\n            type: \"shadow\"\n          }\n        },\n        legend: {},\n        grid: {\n          left: \"3%\",\n          right: \"4%\",\n          bottom: \"3%\",\n          containLabel: true\n        },\n        xAxis: {\n          type: \"value\",\n          boundaryGap: [0, 0.01]\n        },\n        yAxis: {\n          type: \"category\",\n          data: names\n        },\n        series: [{\n          name: \"人数\",\n          type: \"bar\",\n          data: personNums,\n          // 使用人数数据\n          itemStyle: {\n            color: \"#409EFF\"\n          }\n        }]\n      };\n      if (this.chart) {\n        this.chart.setOption(option);\n      }\n    }\n  },\n  beforeDestroy() {\n    // 销毁图表实例以释放内存\n    if (this.chart) {\n      this.chart.dispose();\n    }\n  }\n};","map":{"version":3,"names":["echarts","props","chartTitle","type","String","default","teamNumsData","Array","required","data","chart","mounted","initChart","watch","methods","chartDom","$refs","init","updateChart","on","params","componentType","$emit","name","sortedData","sort","a","b","personNum","names","map","item","personNums","option","title","text","tooltip","trigger","axisPointer","legend","grid","left","right","bottom","containLabel","xAxis","boundaryGap","yAxis","series","itemStyle","color","setOption","beforeDestroy","dispose"],"sources":["src/components/TeamNumsComponent.vue"],"sourcesContent":["<template>\n    <div ref=\"chart\" class=\"numsChart-container\"></div>\n</template>\n\n<script>\nimport * as echarts from \"echarts\";\n\nexport default {\n    props: {\n        // 接收图表的标题、Y轴数据和系列数据\n        chartTitle: {\n            type: String,\n            default: \"各团队人数汇总\"\n        },\n        teamNumsData: {\n            type: Array,\n            required: true\n        },\n    },\n    data() {\n        return {\n            chart: null\n        };\n    },\n    mounted() {\n        this.initChart();\n    },\n    watch: {\n        // 当传入的数据发生变化时，更新图表\n        teamNumsData: \"updateChart\",\n    },\n    methods: {\n        initChart() {\n            const chartDom = this.$refs.chart;\n            this.chart = echarts.init(chartDom);\n            this.updateChart();\n\n\n            // 监听鼠标事件\n            this.chart.on(\"mouseover\", (params) => {\n                if (params.componentType === \"series\") {\n                    this.$emit(\"highlight-name\", params.name); // 通知父组件\n                }\n            });\n\n\n        },\n        updateChart() {\n            // 对 teamNumsData 按人数排序\n\n            const sortedData = [...this.teamNumsData].sort((a, b) => a.personNum - b.personNum);\n\n            // 提取团队名称和人数数据\n            const names = sortedData.map(item => item.name);\n            const personNums = sortedData.map(item => item.personNum);\n\n            const option = {\n                title: {\n                    text: this.chartTitle\n                },\n                tooltip: {\n                    trigger: \"axis\",\n                    axisPointer: {\n                        type: \"shadow\"\n                    }\n                },\n                legend: {},\n                grid: {\n                    left: \"3%\",\n                    right: \"4%\",\n                    bottom: \"3%\",\n                    containLabel: true\n                },\n                xAxis: {\n                    type: \"value\",\n                    boundaryGap: [0, 0.01]\n                },\n                yAxis: {\n                    type: \"category\",\n                    data: names\n                },\n                series: [\n                    {\n                        name: \"人数\",\n                        type: \"bar\",\n                        data: personNums, // 使用人数数据\n                        itemStyle: { color: \"#409EFF\" }\n                    }\n                ]\n            };\n\n            if (this.chart) {\n                this.chart.setOption(option);\n            }\n        }\n    },\n    beforeDestroy() {\n        // 销毁图表实例以释放内存\n        if (this.chart) {\n            this.chart.dispose();\n        }\n    }\n};\n</script>\n\n<style scoped>\n.numsChart-container {\n    width: 600px;\n    height: 500px;\n}\n</style>"],"mappings":"AAKA,YAAAA,OAAA;AAEA;EACAC,KAAA;IACA;IACAC,UAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAC,YAAA;MACAH,IAAA,EAAAI,KAAA;MACAC,QAAA;IACA;EACA;EACAC,KAAA;IACA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,SAAA;EACA;EACAC,KAAA;IACA;IACAP,YAAA;EACA;EACAQ,OAAA;IACAF,UAAA;MACA,MAAAG,QAAA,QAAAC,KAAA,CAAAN,KAAA;MACA,KAAAA,KAAA,GAAAV,OAAA,CAAAiB,IAAA,CAAAF,QAAA;MACA,KAAAG,WAAA;;MAGA;MACA,KAAAR,KAAA,CAAAS,EAAA,cAAAC,MAAA;QACA,IAAAA,MAAA,CAAAC,aAAA;UACA,KAAAC,KAAA,mBAAAF,MAAA,CAAAG,IAAA;QACA;MACA;IAGA;IACAL,YAAA;MACA;;MAEA,MAAAM,UAAA,YAAAlB,YAAA,EAAAmB,IAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAD,CAAA,CAAAE,SAAA,GAAAD,CAAA,CAAAC,SAAA;;MAEA;MACA,MAAAC,KAAA,GAAAL,UAAA,CAAAM,GAAA,CAAAC,IAAA,IAAAA,IAAA,CAAAR,IAAA;MACA,MAAAS,UAAA,GAAAR,UAAA,CAAAM,GAAA,CAAAC,IAAA,IAAAA,IAAA,CAAAH,SAAA;MAEA,MAAAK,MAAA;QACAC,KAAA;UACAC,IAAA,OAAAjC;QACA;QACAkC,OAAA;UACAC,OAAA;UACAC,WAAA;YACAnC,IAAA;UACA;QACA;QACAoC,MAAA;QACAC,IAAA;UACAC,IAAA;UACAC,KAAA;UACAC,MAAA;UACAC,YAAA;QACA;QACAC,KAAA;UACA1C,IAAA;UACA2C,WAAA;QACA;QACAC,KAAA;UACA5C,IAAA;UACAM,IAAA,EAAAoB;QACA;QACAmB,MAAA,GACA;UACAzB,IAAA;UACApB,IAAA;UACAM,IAAA,EAAAuB,UAAA;UAAA;UACAiB,SAAA;YAAAC,KAAA;UAAA;QACA;MAEA;MAEA,SAAAxC,KAAA;QACA,KAAAA,KAAA,CAAAyC,SAAA,CAAAlB,MAAA;MACA;IACA;EACA;EACAmB,cAAA;IACA;IACA,SAAA1C,KAAA;MACA,KAAAA,KAAA,CAAA2C,OAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}