{"ast":null,"code":"import RentTable from \"@/components/RentTable.vue\";\nimport axios from \"axios\";\nexport default {\n  components: {\n    RentTable\n  },\n  data() {\n    return {\n      fileList: [],\n      // 存储已上传的文件列表\n      teams: [],\n      // 团队数据列表\n      teamMap: {},\n      // 映射 { teamId: teamName }\n      activeTab: \"工位\",\n      // 默认加载的 Tab\n      tableData: [],\n      // 当前 Tab 的表格数据\n      dialogVisible: false,\n      dialogTitle: \"\",\n      form: {\n        id: null,\n        type: \"\",\n        coinConsumption: null,\n        isAvailable: 0,\n        rentedTeamId: null,\n        imageUrl: \"\" // 新增字段来存储图片的 URL\n      },\n      rules: {\n        type: [{\n          required: true,\n          message: \"请输入物品名称\",\n          trigger: \"blur\"\n        }],\n        coinConsumption: [{\n          required: true,\n          message: \"请输入价格\",\n          trigger: \"blur\"\n        }]\n      },\n      columns: [{\n        prop: \"id\",\n        label: \"物品id\",\n        width: 80\n      }, {\n        prop: \"imageUrl\",\n        label: \"图片\",\n        slot: \"imageSlot\",\n        width: 150\n      },\n      // 新增图片列\n      {\n        prop: \"type\",\n        label: \"物品名称\",\n        width: 150\n      }, {\n        prop: \"coinConsumption\",\n        label: \"虚拟币价格\",\n        width: 100\n      }, {\n        prop: \"isAvailable\",\n        label: \"是否可用\",\n        slot: \"isAvailableSlot\",\n        width: 100\n      }, {\n        prop: \"rentedTeamId\",\n        label: \"租用队伍\",\n        width: 150\n      }, {\n        prop: \"teamName\",\n        label: \"租用队伍名称\",\n        width: 200\n      }]\n    };\n  },\n  computed: {\n    // 将 isAvailable 转换为布尔值\n    isAvailableBoolean: {\n      get() {\n        return this.form.isAvailable === 1;\n      },\n      set(value) {\n        this.form.isAvailable = value ? 1 : 0;\n      }\n    }\n  },\n  methods: {\n    handleUploadSuccess(response, file, fileList) {\n      console.log(\"res:\", response);\n      if (response.code === 200) {\n        // 检查上传是否成功\n        this.form.imageUrl = response.data; // 更新表单中的图片 URL\n        this.$message.success(\"图片上传成功！\");\n      } else {\n        this.$message.error(\"图片上传失败，请重试！\");\n      }\n    },\n    beforeUpload(file) {\n      const isImage = file.type.startsWith('image/');\n      if (!isImage) {\n        this.$message.error(\"只能上传图片文件！\");\n      }\n      return isImage;\n    },\n    loadTeams() {\n      axios.get(\"http://localhost:8080/team/list\").then(response => {\n        this.teams = response.data;\n        this.teamMap = this.teams.reduce((map, team) => {\n          map[team.teamId] = team.teamName;\n          return map;\n        }, {});\n        // 更新表格数据，确保 teamName 显示正确\n        this.loadTableData();\n        console.log(\"teams:\", this.teams);\n      }).catch(error => {\n        console.error(\"加载团队列表失败：\", error);\n        this.$message.error(\"加载团队列表失败，请稍后重试\");\n      });\n    },\n    // 通用加载数据方法，根据 activeTab 加载对应数据\n    loadTableData() {\n      let endpoint = this.getEndpoint();\n      axios.get(endpoint, {\n        // withCredentials: true,  // 如果需要携带 cookies 或身份验证信息\n      }).then(response => {\n        this.data = response.data.data;\n        this.tableData = this.data.map(item => ({\n          ...item,\n          teamName: this.teamMap[item.rentedTeamId] || \"未分配\",\n          imageUrl: item.imageUrl && typeof item.imageUrl === 'string' && item.imageUrl.startsWith('http') ? item.imageUrl : `http://localhost:8080${item.imageUrl || ''}` // 处理空值\n        }));\n        console.log(\"tabledata:\", this.tableData);\n      }).catch(error => {\n        console.error(`加载${this.activeTab}数据失败：`, error);\n        this.$message.error(`加载${this.activeTab}数据失败，请稍后重试`);\n      });\n    },\n    // 根据 activeTab 获取 API 端点\n    getEndpoint() {\n      if (this.activeTab === \"工位\") return \"http://localhost:8080/items/workstation/all\";\n      if (this.activeTab === \"相机\") return \"http://localhost:8080/items/camera/all\";\n      if (this.activeTab === \"其他设备\") return \"http://localhost:8080/items/equipment/all\";\n      return \"\";\n    },\n    // 搜索功能\n    searchStationTable(query) {\n      axios.get(\"http://localhost:8080/items/workstation/findbyname\", {\n        params: {\n          name: query\n        }\n      }).then(response => {\n        this.tableData = response.data.data;\n      }).catch(error => {\n        console.error(\"搜索工位数据失败：\", error);\n        this.$message.error(\"搜索工位数据失败，请稍后重试\");\n      });\n    },\n    searchCameraTable(query) {\n      axios.get(\"http://localhost:8080/items/camera/findbyname\", {\n        params: {\n          name: query\n        }\n      }).then(response => {\n        this.tableData = response.data.data;\n      }).catch(error => {\n        console.error(\"搜索相机数据失败：\", error);\n        this.$message.error(\"搜索相机数据失败，请稍后重试\");\n      });\n    },\n    searchOtherTable(query) {\n      axios.get(\"http://localhost:8080/items/equipment/findbyname\", {\n        params: {\n          name: query\n        }\n      }).then(response => {\n        this.tableData = response.data;\n      }).catch(error => {\n        console.error(\"搜索其他设备数据失败：\", error);\n        this.$message.error(\"搜索其他设备数据失败，请稍后重试\");\n      });\n    },\n    // 重置功能\n    resetStationTable() {\n      this.loadTableData();\n    },\n    resetCameraTable() {\n      this.loadTableData();\n    },\n    resetOtherTable() {\n      this.loadTableData();\n    },\n    // 新增工位\n    handleAddStation() {\n      this.dialogTitle = \"新增工位\"; // 设置对话框标题\n      this.form = {\n        id: null,\n        type: \"\",\n        coinConsumption: null,\n        isAvailable: 0\n      }; // 清空表单\n      this.dialogVisible = true; // 显示弹框\n    },\n    // 新增相机\n    handleAddCamera() {\n      this.dialogTitle = \"新增相机\"; // 设置对话框标题\n      this.form = {\n        id: null,\n        type: \"\",\n        coinConsumption: null,\n        isAvailable: 0\n      }; // 清空表单\n      this.dialogVisible = true; // 显示弹框\n    },\n    // 新增其他设备\n    handleAddOther() {\n      this.dialogTitle = \"新增其他设备\"; // 设置对话框标题\n      this.form = {\n        id: null,\n        type: \"\",\n        coinConsumption: null,\n        isAvailable: 0\n      }; // 清空表单\n      this.dialogVisible = true; // 显示弹框\n    },\n    // 提交表单数据\n    handleSubmit() {\n      this.$refs.formRef.validate(valid => {\n        if (!valid) return;\n        const {\n          addEndpoint,\n          editEndpoint\n        } = this.getApiEndpoints();\n        const method = this.form.id ? \"put\" : \"post\"; // 如果有 ID 说明是编辑，反之为新增\n        const endpoint = this.form.id ? editEndpoint : addEndpoint;\n        const formData = {\n          ...this.form,\n          isAvailable: this.form.isAvailable ? 1 : 0\n        };\n        console.log(\"thisform:\", formData);\n        axios[method](endpoint, formData).then(() => {\n          this.$message.success(`${this.dialogTitle}成功`);\n          this.dialogVisible = false;\n          this.loadTableData(); // 刷新数据\n        }).catch(error => {\n          console.error(`${this.dialogTitle}失败：`, error);\n          this.$message.error(`${this.dialogTitle}失败，请稍后重试`);\n        });\n      });\n    },\n    // 获取不同 Tab 对应的 API 地址\n    getApiEndpoints() {\n      if (this.activeTab === \"工位\") {\n        return {\n          addEndpoint: \"http://localhost:8080/items/workstation/add\",\n          editEndpoint: `http://localhost:8080/items/workstation/update/${this.form.id}`\n        };\n      }\n      if (this.activeTab === \"相机\") {\n        return {\n          addEndpoint: \"http://localhost:8080/items/camera/add\",\n          editEndpoint: `http://localhost:8080/items/camera/update/${this.form.id}`\n        };\n      }\n      if (this.activeTab === \"其他设备\") {\n        return {\n          addEndpoint: \"http://localhost:8080/items/equipment/add\",\n          editEndpoint: `http://localhost:8080/items/workstation/update/${this.form.id}`\n        };\n      }\n      return {};\n    },\n    // 编辑功能\n    handleEditStation(row) {\n      this.dialogTitle = `编辑工位: ${row.type}`; // 设置对话框标题\n      this.form = {\n        ...row\n      }; // 将表单数据填充为所选行数据\n      this.dialogVisible = true; // 显示弹框\n    },\n    handleEditCamera(row) {\n      this.dialogTitle = `编辑相机: ${row.type}`; // 设置对话框标题\n      this.form = {\n        ...row\n      }; // 将表单数据填充为所选行数据\n      this.dialogVisible = true; // 显示弹框\n    },\n    handleEditOther(row) {\n      this.dialogTitle = `编辑设备: ${row.type}`; // 设置对话框标题\n      this.form = {\n        ...row\n      }; // 将表单数据填充为所选行数据\n      this.dialogVisible = true; // 显示弹框\n    },\n    // 删除功能\n    deleteStationRow(row) {\n      this.confirmDelete(`http://localhost:8080/items/workstation/delete/${row.id}`, \"工位\", row);\n    },\n    deleteCameraRow(row) {\n      this.confirmDelete(`http://localhost:8080/items/camera/delete/${row.id}`, \"相机\", row);\n    },\n    deleteOtherRow(row) {\n      this.confirmDelete(`http://localhost:8080/items/equipment/delete/${row.id}`, \"其他设备\", row);\n    },\n    confirmDelete(endpoint, label, row) {\n      this.$confirm(`确定删除${label} ${row.type} 吗？`, \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(() => axios.delete(endpoint)).then(() => {\n        this.$message.success(\"删除成功\");\n        this.loadTableData();\n      }).catch(error => {\n        if (error !== \"cancel\") {\n          console.error(`删除${label}失败：`, error);\n          this.$message.error(`删除${label}失败，请稍后重试`);\n        }\n      });\n    }\n  },\n  watch: {\n    // Tab 切换时加载对应数据\n    activeTab() {\n      this.loadTableData();\n    }\n  },\n  mounted() {\n    this.loadTableData();\n    this.loadTeams(); // 默认加载工位数据\n  }\n};","map":{"version":3,"names":["RentTable","axios","components","data","fileList","teams","teamMap","activeTab","tableData","dialogVisible","dialogTitle","form","id","type","coinConsumption","isAvailable","rentedTeamId","imageUrl","rules","required","message","trigger","columns","prop","label","width","slot","computed","isAvailableBoolean","get","set","value","methods","handleUploadSuccess","response","file","console","log","code","$message","success","error","beforeUpload","isImage","startsWith","loadTeams","then","reduce","map","team","teamId","teamName","loadTableData","catch","endpoint","getEndpoint","item","searchStationTable","query","params","name","searchCameraTable","searchOtherTable","resetStationTable","resetCameraTable","resetOtherTable","handleAddStation","handleAddCamera","handleAddOther","handleSubmit","$refs","formRef","validate","valid","addEndpoint","editEndpoint","getApiEndpoints","method","formData","handleEditStation","row","handleEditCamera","handleEditOther","deleteStationRow","confirmDelete","deleteCameraRow","deleteOtherRow","$confirm","confirmButtonText","cancelButtonText","delete","watch","mounted"],"sources":["src/views/manage/RentView.vue"],"sourcesContent":["<template>\n    <div>\n        <el-tabs type=\"border-card\" v-model=\"activeTab\">\n            <el-tab-pane label=\"工位\" name=\"工位\">\n                <RentTable :columns=\"columns\" :data=\"tableData\" @search=\"searchStationTable\" @reset=\"resetStationTable\"\n                    @add=\"handleAddStation\" @edit=\"handleEditStation\" @delete=\"deleteStationRow\">\n                    <template #imageSlot=\"{ scope }\">\n                        <img :src=\"scope.row.imageUrl\" alt=\"物品图片\" style=\"width: 80px; height: auto;\" />\n                    </template>\n                    <template #isAvailableSlot=\"{ scope }\">\n                        <span :style=\"{ color: scope.row.isAvailable ? 'green' : 'red' }\">\n                            {{ scope.row.isAvailable ? '可用' : '不可用' }}\n                        </span>\n                    </template>\n\n                </RentTable>\n            </el-tab-pane>\n            <el-tab-pane label=\"相机\" name=\"相机\">\n                <RentTable :columns=\"columns\" :data=\"tableData\" @search=\"searchCameraTable\" @reset=\"resetCameraTable\"\n                    @add=\"handleAddCamera\" @edit=\"handleEditCamera\" @delete=\"deleteCameraRow\">\n\n                    <template #imageSlot=\"{ scope }\">\n                        <img :src=\"scope.row.imageUrl\" alt=\"物品图片\" style=\"width: 80px; height: auto;\" />\n                    </template>\n                    <template #isAvailableSlot=\"{ scope }\">\n                        <span :style=\"{ color: scope.row.isAvailable ? 'green' : 'red' }\">\n                            {{ scope.row.isAvailable ? '可用' : '不可用' }}\n                        </span>\n                    </template>\n                </RentTable>\n            </el-tab-pane>\n            <el-tab-pane label=\"其他设备\" name=\"其他设备\">\n                <RentTable :columns=\"columns\" :data=\"tableData\" @search=\"searchOtherTable\" @reset=\"resetOtherTable\"\n                    @add=\"handleAddOther\" @edit=\"handleEditOther\" @delete=\"deleteOtherRow\">\n                    <template #imageSlot=\"{ scope }\">\n                        <img :src=\"scope.row.imageUrl\" alt=\"物品图片\" style=\"width: 80px; height: auto;\" />\n                    </template>\n                    <template #isAvailableSlot=\"{ scope }\">\n                        <span :style=\"{ color: scope.row.isAvailable ? 'green' : 'red' }\">\n                            {{ scope.row.isAvailable ? '可用' : '不可用' }}\n                        </span>\n                    </template>\n                </RentTable>\n            </el-tab-pane>\n        </el-tabs>\n\n\n\n        <!-- 弹出表单对话框 -->\n        <el-dialog :visible.sync=\"dialogVisible\" :title=\"dialogTitle\">\n            <el-form :model=\"form\" :rules=\"rules\" ref=\"formRef\" label-width=\"120px\">\n                <el-form-item label=\"物品名称\" prop=\"type\">\n                    <el-input v-model=\"form.type\"></el-input>\n                </el-form-item>\n\n\n                <el-form-item label=\"物品图片\" prop=\"imageFile\">\n                    <el-upload class=\"upload-demo\" action=\"http://localhost:8080/files/upload\"\n                        :on-success=\"handleUploadSuccess\" :before-upload=\"beforeUpload\" :file-list=\"fileList\"\n                        :show-file-list=\"false\">\n                        <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n                    </el-upload>\n                </el-form-item>\n\n\n\n\n                <el-form-item label=\"虚拟币价格\" prop=\"coinConsumption\">\n                    <el-input type=\"number\" v-model=\"form.coinConsumption\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"是否可用\" prop=\"isAvailable\">\n                    <el-switch v-model=\"isAvailableBoolean\"></el-switch>\n                </el-form-item>\n                <el-form-item label=\"租用队伍\" prop=\"rentedTeamId\">\n                    <el-select v-model=\"form.rentedTeamId\" placeholder=\"请选择队伍\">\n                        <el-option v-for=\"team in teams\" :key=\"team.teamId\" :label=\"team.teamName\"\n                            :value=\"team.teamId\"></el-option>\n                    </el-select>\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogVisible = false\">取消</el-button>\n                <el-button type=\"primary\" @click=\"handleSubmit\">确定</el-button>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport RentTable from \"@/components/RentTable.vue\";\nimport axios from \"axios\";\n\nexport default {\n    components: { RentTable },\n    data() {\n        return {\n            fileList: [],  // 存储已上传的文件列表\n            teams: [], // 团队数据列表\n            teamMap: {}, // 映射 { teamId: teamName }\n            activeTab: \"工位\", // 默认加载的 Tab\n            tableData: [], // 当前 Tab 的表格数据\n            dialogVisible: false,\n            dialogTitle: \"\",\n            form: {\n                id: null,\n                type: \"\",\n                coinConsumption: null,\n                isAvailable: 0,\n                rentedTeamId: null,\n                imageUrl: \"\",  // 新增字段来存储图片的 URL\n            },\n            rules: {\n                type: [{ required: true, message: \"请输入物品名称\", trigger: \"blur\" }],\n                coinConsumption: [{ required: true, message: \"请输入价格\", trigger: \"blur\" }],\n            },\n            columns: [\n                { prop: \"id\", label: \"物品id\", width: 80 },\n                { prop: \"imageUrl\", label: \"图片\", slot: \"imageSlot\", width: 150 }, // 新增图片列\n                { prop: \"type\", label: \"物品名称\", width: 150 },\n                { prop: \"coinConsumption\", label: \"虚拟币价格\", width: 100 },\n                { prop: \"isAvailable\", label: \"是否可用\", slot: \"isAvailableSlot\", width: 100 },\n                { prop: \"rentedTeamId\", label: \"租用队伍\", width: 150 },\n                { prop: \"teamName\", label: \"租用队伍名称\", width: 200 },\n            ],\n        };\n    },\n    computed: {\n        // 将 isAvailable 转换为布尔值\n        isAvailableBoolean: {\n            get() {\n                return this.form.isAvailable === 1;\n            },\n            set(value) {\n                this.form.isAvailable = value ? 1 : 0;\n            }\n        }\n    },\n    methods: {\n        handleUploadSuccess(response, file, fileList) {\n            console.log(\"res:\", response)\n            if (response.code === 200) {  // 检查上传是否成功\n                this.form.imageUrl = response.data;  // 更新表单中的图片 URL\n                this.$message.success(\"图片上传成功！\");\n            } else {\n                this.$message.error(\"图片上传失败，请重试！\");\n            }\n        },\n        beforeUpload(file) {\n            const isImage = file.type.startsWith('image/');\n            if (!isImage) {\n                this.$message.error(\"只能上传图片文件！\");\n            }\n            return isImage;\n        },\n        loadTeams() {\n            axios\n                .get(\"http://localhost:8080/team/list\")\n                .then((response) => {\n                    this.teams = response.data;\n                    this.teamMap = this.teams.reduce((map, team) => {\n                        map[team.teamId] = team.teamName;\n                        return map;\n                    }, {});\n                    // 更新表格数据，确保 teamName 显示正确\n                    this.loadTableData();\n                    console.log(\"teams:\", this.teams);\n                })\n                .catch((error) => {\n                    console.error(\"加载团队列表失败：\", error);\n                    this.$message.error(\"加载团队列表失败，请稍后重试\");\n                });\n        },\n        // 通用加载数据方法，根据 activeTab 加载对应数据\n        loadTableData() {\n            let endpoint = this.getEndpoint();\n            axios\n                .get(endpoint, {\n                    // withCredentials: true,  // 如果需要携带 cookies 或身份验证信息\n                })\n                .then((response) => {\n\n                    this.data = response.data.data;\n                    this.tableData = this.data.map((item) => ({\n                        ...item,\n                        teamName: this.teamMap[item.rentedTeamId] || \"未分配\",\n                        imageUrl: item.imageUrl && typeof item.imageUrl === 'string' && item.imageUrl.startsWith('http')\n                            ? item.imageUrl\n                            : `http://localhost:8080${item.imageUrl || ''}`, // 处理空值\n                    }));\n\n                    console.log(\"tabledata:\", this.tableData);\n\n                })\n                .catch((error) => {\n                    console.error(`加载${this.activeTab}数据失败：`, error);\n                    this.$message.error(`加载${this.activeTab}数据失败，请稍后重试`);\n                });\n        },\n\n        // 根据 activeTab 获取 API 端点\n        getEndpoint() {\n            if (this.activeTab === \"工位\") return \"http://localhost:8080/items/workstation/all\";\n            if (this.activeTab === \"相机\") return \"http://localhost:8080/items/camera/all\";\n            if (this.activeTab === \"其他设备\") return \"http://localhost:8080/items/equipment/all\";\n            return \"\";\n        },\n        // 搜索功能\n        searchStationTable(query) {\n            axios\n                .get(\"http://localhost:8080/items/workstation/findbyname\", { params: { name: query } })\n                .then((response) => {\n                    this.tableData = response.data.data;\n                })\n                .catch((error) => {\n                    console.error(\"搜索工位数据失败：\", error);\n                    this.$message.error(\"搜索工位数据失败，请稍后重试\");\n                });\n        },\n        searchCameraTable(query) {\n            axios\n                .get(\"http://localhost:8080/items/camera/findbyname\", { params: { name: query } })\n                .then((response) => {\n                    this.tableData = response.data.data;\n                })\n                .catch((error) => {\n                    console.error(\"搜索相机数据失败：\", error);\n                    this.$message.error(\"搜索相机数据失败，请稍后重试\");\n                });\n        },\n        searchOtherTable(query) {\n            axios\n                .get(\"http://localhost:8080/items/equipment/findbyname\", { params: { name: query } })\n                .then((response) => {\n                    this.tableData = response.data;\n                })\n                .catch((error) => {\n                    console.error(\"搜索其他设备数据失败：\", error);\n                    this.$message.error(\"搜索其他设备数据失败，请稍后重试\");\n                });\n        },\n        // 重置功能\n        resetStationTable() {\n            this.loadTableData();\n        },\n        resetCameraTable() {\n            this.loadTableData();\n        },\n        resetOtherTable() {\n            this.loadTableData();\n        },\n\n        // 新增工位\n        handleAddStation() {\n            this.dialogTitle = \"新增工位\";  // 设置对话框标题\n            this.form = { id: null, type: \"\", coinConsumption: null, isAvailable: 0 }; // 清空表单\n            this.dialogVisible = true;  // 显示弹框\n        },\n        // 新增相机\n        handleAddCamera() {\n            this.dialogTitle = \"新增相机\";  // 设置对话框标题\n            this.form = { id: null, type: \"\", coinConsumption: null, isAvailable: 0 }; // 清空表单\n            this.dialogVisible = true;  // 显示弹框\n        },\n        // 新增其他设备\n        handleAddOther() {\n            this.dialogTitle = \"新增其他设备\";  // 设置对话框标题\n            this.form = { id: null, type: \"\", coinConsumption: null, isAvailable: 0 }; // 清空表单\n            this.dialogVisible = true;  // 显示弹框\n        },\n        // 提交表单数据\n        handleSubmit() {\n            this.$refs.formRef.validate((valid) => {\n                if (!valid) return;\n                const { addEndpoint, editEndpoint } = this.getApiEndpoints();\n                const method = this.form.id ? \"put\" : \"post\";  // 如果有 ID 说明是编辑，反之为新增\n                const endpoint = this.form.id ? editEndpoint : addEndpoint;\n\n                const formData = {\n                    ...this.form,\n                    isAvailable: this.form.isAvailable ? 1 : 0\n                };\n                console.log(\"thisform:\", formData);\n                axios[method](endpoint, formData)\n                    .then(() => {\n                        this.$message.success(`${this.dialogTitle}成功`);\n                        this.dialogVisible = false;\n                        this.loadTableData(); // 刷新数据\n                    })\n                    .catch((error) => {\n                        console.error(`${this.dialogTitle}失败：`, error);\n                        this.$message.error(`${this.dialogTitle}失败，请稍后重试`);\n                    });\n            });\n        },\n\n        // 获取不同 Tab 对应的 API 地址\n        getApiEndpoints() {\n            if (this.activeTab === \"工位\") {\n                return {\n                    addEndpoint: \"http://localhost:8080/items/workstation/add\",\n                    editEndpoint: `http://localhost:8080/items/workstation/update/${this.form.id}`,\n\n\n\n                };\n            }\n            if (this.activeTab === \"相机\") {\n                return {\n                    addEndpoint: \"http://localhost:8080/items/camera/add\",\n                    editEndpoint: `http://localhost:8080/items/camera/update/${this.form.id}`,\n                };\n            }\n            if (this.activeTab === \"其他设备\") {\n                return {\n                    addEndpoint: \"http://localhost:8080/items/equipment/add\",\n                    editEndpoint: `http://localhost:8080/items/workstation/update/${this.form.id}`\n\n                };\n            }\n            return {};\n        },\n\n\n        // 编辑功能\n        handleEditStation(row) {\n            this.dialogTitle = `编辑工位: ${row.type}`;  // 设置对话框标题\n            this.form = { ...row };  // 将表单数据填充为所选行数据\n            this.dialogVisible = true;  // 显示弹框\n        },\n        handleEditCamera(row) {\n            this.dialogTitle = `编辑相机: ${row.type}`;  // 设置对话框标题\n            this.form = { ...row };  // 将表单数据填充为所选行数据\n            this.dialogVisible = true;  // 显示弹框\n        },\n        handleEditOther(row) {\n            this.dialogTitle = `编辑设备: ${row.type}`;  // 设置对话框标题\n            this.form = { ...row };  // 将表单数据填充为所选行数据\n            this.dialogVisible = true;  // 显示弹框\n        },\n        // 删除功能\n        deleteStationRow(row) {\n            this.confirmDelete(`http://localhost:8080/items/workstation/delete/${row.id}`, \"工位\", row);\n        },\n        deleteCameraRow(row) {\n            this.confirmDelete(`http://localhost:8080/items/camera/delete/${row.id}`, \"相机\", row);\n        },\n        deleteOtherRow(row) {\n            this.confirmDelete(`http://localhost:8080/items/equipment/delete/${row.id}`, \"其他设备\", row);\n        },\n        confirmDelete(endpoint, label, row) {\n            this.$confirm(\n                `确定删除${label} ${row.type} 吗？`,\n                \"提示\",\n                {\n                    confirmButtonText: \"确定\",\n                    cancelButtonText: \"取消\",\n                    type: \"warning\",\n                }\n            )\n                .then(() => axios.delete(endpoint))\n                .then(() => {\n                    this.$message.success(\"删除成功\");\n                    this.loadTableData();\n                })\n                .catch((error) => {\n                    if (error !== \"cancel\") {\n                        console.error(`删除${label}失败：`, error);\n                        this.$message.error(`删除${label}失败，请稍后重试`);\n                    }\n                });\n        },\n    },\n    watch: {\n        // Tab 切换时加载对应数据\n        activeTab() {\n            this.loadTableData();\n        },\n    },\n    mounted() {\n        this.loadTableData();\n        this.loadTeams(); // 默认加载工位数据\n    },\n\n};\n</script>\n\n<style scoped>\n/* 根据需要添加样式 */\n</style>\n"],"mappings":"AAyFA,OAAAA,SAAA;AACA,OAAAC,KAAA;AAEA;EACAC,UAAA;IAAAF;EAAA;EACAG,KAAA;IACA;MACAC,QAAA;MAAA;MACAC,KAAA;MAAA;MACAC,OAAA;MAAA;MACAC,SAAA;MAAA;MACAC,SAAA;MAAA;MACAC,aAAA;MACAC,WAAA;MACAC,IAAA;QACAC,EAAA;QACAC,IAAA;QACAC,eAAA;QACAC,WAAA;QACAC,YAAA;QACAC,QAAA;MACA;MACAC,KAAA;QACAL,IAAA;UAAAM,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAP,eAAA;UAAAK,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;MACAC,OAAA,GACA;QAAAC,IAAA;QAAAC,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAF,IAAA;QAAAC,KAAA;QAAAE,IAAA;QAAAD,KAAA;MAAA;MAAA;MACA;QAAAF,IAAA;QAAAC,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAF,IAAA;QAAAC,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAF,IAAA;QAAAC,KAAA;QAAAE,IAAA;QAAAD,KAAA;MAAA,GACA;QAAAF,IAAA;QAAAC,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAF,IAAA;QAAAC,KAAA;QAAAC,KAAA;MAAA;IAEA;EACA;EACAE,QAAA;IACA;IACAC,kBAAA;MACAC,IAAA;QACA,YAAAlB,IAAA,CAAAI,WAAA;MACA;MACAe,IAAAC,KAAA;QACA,KAAApB,IAAA,CAAAI,WAAA,GAAAgB,KAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,oBAAAC,QAAA,EAAAC,IAAA,EAAA/B,QAAA;MACAgC,OAAA,CAAAC,GAAA,SAAAH,QAAA;MACA,IAAAA,QAAA,CAAAI,IAAA;QAAA;QACA,KAAA3B,IAAA,CAAAM,QAAA,GAAAiB,QAAA,CAAA/B,IAAA;QACA,KAAAoC,QAAA,CAAAC,OAAA;MACA;QACA,KAAAD,QAAA,CAAAE,KAAA;MACA;IACA;IACAC,aAAAP,IAAA;MACA,MAAAQ,OAAA,GAAAR,IAAA,CAAAtB,IAAA,CAAA+B,UAAA;MACA,KAAAD,OAAA;QACA,KAAAJ,QAAA,CAAAE,KAAA;MACA;MACA,OAAAE,OAAA;IACA;IACAE,UAAA;MACA5C,KAAA,CACA4B,GAAA,oCACAiB,IAAA,CAAAZ,QAAA;QACA,KAAA7B,KAAA,GAAA6B,QAAA,CAAA/B,IAAA;QACA,KAAAG,OAAA,QAAAD,KAAA,CAAA0C,MAAA,EAAAC,GAAA,EAAAC,IAAA;UACAD,GAAA,CAAAC,IAAA,CAAAC,MAAA,IAAAD,IAAA,CAAAE,QAAA;UACA,OAAAH,GAAA;QACA;QACA;QACA,KAAAI,aAAA;QACAhB,OAAA,CAAAC,GAAA,gBAAAhC,KAAA;MACA,GACAgD,KAAA,CAAAZ,KAAA;QACAL,OAAA,CAAAK,KAAA,cAAAA,KAAA;QACA,KAAAF,QAAA,CAAAE,KAAA;MACA;IACA;IACA;IACAW,cAAA;MACA,IAAAE,QAAA,QAAAC,WAAA;MACAtD,KAAA,CACA4B,GAAA,CAAAyB,QAAA;QACA;MAAA,CACA,EACAR,IAAA,CAAAZ,QAAA;QAEA,KAAA/B,IAAA,GAAA+B,QAAA,CAAA/B,IAAA,CAAAA,IAAA;QACA,KAAAK,SAAA,QAAAL,IAAA,CAAA6C,GAAA,CAAAQ,IAAA;UACA,GAAAA,IAAA;UACAL,QAAA,OAAA7C,OAAA,CAAAkD,IAAA,CAAAxC,YAAA;UACAC,QAAA,EAAAuC,IAAA,CAAAvC,QAAA,WAAAuC,IAAA,CAAAvC,QAAA,iBAAAuC,IAAA,CAAAvC,QAAA,CAAA2B,UAAA,WACAY,IAAA,CAAAvC,QAAA,GACA,wBAAAuC,IAAA,CAAAvC,QAAA;QACA;QAEAmB,OAAA,CAAAC,GAAA,oBAAA7B,SAAA;MAEA,GACA6C,KAAA,CAAAZ,KAAA;QACAL,OAAA,CAAAK,KAAA,WAAAlC,SAAA,SAAAkC,KAAA;QACA,KAAAF,QAAA,CAAAE,KAAA,WAAAlC,SAAA;MACA;IACA;IAEA;IACAgD,YAAA;MACA,SAAAhD,SAAA;MACA,SAAAA,SAAA;MACA,SAAAA,SAAA;MACA;IACA;IACA;IACAkD,mBAAAC,KAAA;MACAzD,KAAA,CACA4B,GAAA;QAAA8B,MAAA;UAAAC,IAAA,EAAAF;QAAA;MAAA,GACAZ,IAAA,CAAAZ,QAAA;QACA,KAAA1B,SAAA,GAAA0B,QAAA,CAAA/B,IAAA,CAAAA,IAAA;MACA,GACAkD,KAAA,CAAAZ,KAAA;QACAL,OAAA,CAAAK,KAAA,cAAAA,KAAA;QACA,KAAAF,QAAA,CAAAE,KAAA;MACA;IACA;IACAoB,kBAAAH,KAAA;MACAzD,KAAA,CACA4B,GAAA;QAAA8B,MAAA;UAAAC,IAAA,EAAAF;QAAA;MAAA,GACAZ,IAAA,CAAAZ,QAAA;QACA,KAAA1B,SAAA,GAAA0B,QAAA,CAAA/B,IAAA,CAAAA,IAAA;MACA,GACAkD,KAAA,CAAAZ,KAAA;QACAL,OAAA,CAAAK,KAAA,cAAAA,KAAA;QACA,KAAAF,QAAA,CAAAE,KAAA;MACA;IACA;IACAqB,iBAAAJ,KAAA;MACAzD,KAAA,CACA4B,GAAA;QAAA8B,MAAA;UAAAC,IAAA,EAAAF;QAAA;MAAA,GACAZ,IAAA,CAAAZ,QAAA;QACA,KAAA1B,SAAA,GAAA0B,QAAA,CAAA/B,IAAA;MACA,GACAkD,KAAA,CAAAZ,KAAA;QACAL,OAAA,CAAAK,KAAA,gBAAAA,KAAA;QACA,KAAAF,QAAA,CAAAE,KAAA;MACA;IACA;IACA;IACAsB,kBAAA;MACA,KAAAX,aAAA;IACA;IACAY,iBAAA;MACA,KAAAZ,aAAA;IACA;IACAa,gBAAA;MACA,KAAAb,aAAA;IACA;IAEA;IACAc,iBAAA;MACA,KAAAxD,WAAA;MACA,KAAAC,IAAA;QAAAC,EAAA;QAAAC,IAAA;QAAAC,eAAA;QAAAC,WAAA;MAAA;MACA,KAAAN,aAAA;IACA;IACA;IACA0D,gBAAA;MACA,KAAAzD,WAAA;MACA,KAAAC,IAAA;QAAAC,EAAA;QAAAC,IAAA;QAAAC,eAAA;QAAAC,WAAA;MAAA;MACA,KAAAN,aAAA;IACA;IACA;IACA2D,eAAA;MACA,KAAA1D,WAAA;MACA,KAAAC,IAAA;QAAAC,EAAA;QAAAC,IAAA;QAAAC,eAAA;QAAAC,WAAA;MAAA;MACA,KAAAN,aAAA;IACA;IACA;IACA4D,aAAA;MACA,KAAAC,KAAA,CAAAC,OAAA,CAAAC,QAAA,CAAAC,KAAA;QACA,KAAAA,KAAA;QACA;UAAAC,WAAA;UAAAC;QAAA,SAAAC,eAAA;QACA,MAAAC,MAAA,QAAAlE,IAAA,CAAAC,EAAA;QACA,MAAA0C,QAAA,QAAA3C,IAAA,CAAAC,EAAA,GAAA+D,YAAA,GAAAD,WAAA;QAEA,MAAAI,QAAA;UACA,QAAAnE,IAAA;UACAI,WAAA,OAAAJ,IAAA,CAAAI,WAAA;QACA;QACAqB,OAAA,CAAAC,GAAA,cAAAyC,QAAA;QACA7E,KAAA,CAAA4E,MAAA,EAAAvB,QAAA,EAAAwB,QAAA,EACAhC,IAAA;UACA,KAAAP,QAAA,CAAAC,OAAA,SAAA9B,WAAA;UACA,KAAAD,aAAA;UACA,KAAA2C,aAAA;QACA,GACAC,KAAA,CAAAZ,KAAA;UACAL,OAAA,CAAAK,KAAA,SAAA/B,WAAA,OAAA+B,KAAA;UACA,KAAAF,QAAA,CAAAE,KAAA,SAAA/B,WAAA;QACA;MACA;IACA;IAEA;IACAkE,gBAAA;MACA,SAAArE,SAAA;QACA;UACAmE,WAAA;UACAC,YAAA,yDAAAhE,IAAA,CAAAC,EAAA;QAIA;MACA;MACA,SAAAL,SAAA;QACA;UACAmE,WAAA;UACAC,YAAA,oDAAAhE,IAAA,CAAAC,EAAA;QACA;MACA;MACA,SAAAL,SAAA;QACA;UACAmE,WAAA;UACAC,YAAA,yDAAAhE,IAAA,CAAAC,EAAA;QAEA;MACA;MACA;IACA;IAGA;IACAmE,kBAAAC,GAAA;MACA,KAAAtE,WAAA,YAAAsE,GAAA,CAAAnE,IAAA;MACA,KAAAF,IAAA;QAAA,GAAAqE;MAAA;MACA,KAAAvE,aAAA;IACA;IACAwE,iBAAAD,GAAA;MACA,KAAAtE,WAAA,YAAAsE,GAAA,CAAAnE,IAAA;MACA,KAAAF,IAAA;QAAA,GAAAqE;MAAA;MACA,KAAAvE,aAAA;IACA;IACAyE,gBAAAF,GAAA;MACA,KAAAtE,WAAA,YAAAsE,GAAA,CAAAnE,IAAA;MACA,KAAAF,IAAA;QAAA,GAAAqE;MAAA;MACA,KAAAvE,aAAA;IACA;IACA;IACA0E,iBAAAH,GAAA;MACA,KAAAI,aAAA,mDAAAJ,GAAA,CAAApE,EAAA,UAAAoE,GAAA;IACA;IACAK,gBAAAL,GAAA;MACA,KAAAI,aAAA,8CAAAJ,GAAA,CAAApE,EAAA,UAAAoE,GAAA;IACA;IACAM,eAAAN,GAAA;MACA,KAAAI,aAAA,iDAAAJ,GAAA,CAAApE,EAAA,YAAAoE,GAAA;IACA;IACAI,cAAA9B,QAAA,EAAA9B,KAAA,EAAAwD,GAAA;MACA,KAAAO,QAAA,CACA,OAAA/D,KAAA,IAAAwD,GAAA,CAAAnE,IAAA,OACA,MACA;QACA2E,iBAAA;QACAC,gBAAA;QACA5E,IAAA;MACA,CACA,EACAiC,IAAA,OAAA7C,KAAA,CAAAyF,MAAA,CAAApC,QAAA,GACAR,IAAA;QACA,KAAAP,QAAA,CAAAC,OAAA;QACA,KAAAY,aAAA;MACA,GACAC,KAAA,CAAAZ,KAAA;QACA,IAAAA,KAAA;UACAL,OAAA,CAAAK,KAAA,MAAAjB,KAAA,OAAAiB,KAAA;UACA,KAAAF,QAAA,CAAAE,KAAA,MAAAjB,KAAA;QACA;MACA;IACA;EACA;EACAmE,KAAA;IACA;IACApF,UAAA;MACA,KAAA6C,aAAA;IACA;EACA;EACAwC,QAAA;IACA,KAAAxC,aAAA;IACA,KAAAP,SAAA;EACA;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}