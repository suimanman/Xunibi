{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      searchQuery: \"\",\n      teams: [],\n      // 所有团队数据\n      currentPage: 1,\n      // 当前页\n      pageSize: 10,\n      // 每页显示数量\n      paginatedTeams: [],\n      // 当前页显示的数据\n      dialogVisible: false,\n      newTeam: {\n        teamId: null,\n        teamName: \"\",\n        virtualCoins: 0,\n        creationDate: null\n      },\n      editMode: false\n    };\n  },\n  created() {\n    this.load(); // 页面加载时获取数据\n  },\n  mounted() {\n    this.load();\n  },\n  methods: {\n    // 搜索团队\n    search() {\n      if (!this.searchQuery) {\n        this.$message.error(\"请输入团队名字查询\");\n        return;\n      }\n\n      // 在团队数据中筛选包含输入内容的记录\n      const filteredTeams = this.teams.filter(team => team.teamName.toString().includes(this.searchQuery));\n      if (filteredTeams.length === 0) {\n        this.$message.warning(\"未找到匹配的团队\");\n      }\n\n      // 更新团队显示数据\n      this.paginatedTeams = filteredTeams.slice(0, this.pageSize);\n      this.currentPage = 1; // 重置当前页\n    },\n    // 重置搜索\n    reset() {\n      this.searchQuery = \"\"; // 清空搜索框\n      this.handlePageChange(1); // 恢复到第一页的分页数据\n    },\n    // 加载数据\n    async load() {\n      try {\n        const response = await axios.get(\"http://localhost:8080/team/list\");\n        if (response.status === 200 && response.data) {\n          this.teams = response.data; // 更新所有团队数据\n          this.handlePageChange(this.currentPage); // 确保分页正确显示\n        }\n      } catch (error) {\n        console.error(\"数据加载失败:\", error);\n      }\n    },\n    handlePageSizeChange(newSize) {\n      this.pageSize = newSize;\n      this.currentPage = 1; // 重置到第一页\n      this.updateDisplayedData();\n    },\n    updateDisplayedData() {\n      const start = (this.currentPage - 1) * this.pageSize;\n      const end = start + this.pageSize;\n      // 确保分页的队列正确显示数据\n      this.paginatedTeams = this.teams.slice(start, end);\n    },\n    // 分页处理\n    handlePageChange(page) {\n      this.currentPage = page;\n      this.updateDisplayedData();\n\n      // 打印分页数据，调试时使用\n      console.log(\"currentPage:\", this.currentPage);\n      console.log(\"start:\", start, \"end:\", end);\n      console.log(\"paginatedTeams:\", this.paginatedTeams);\n    },\n    // 添加团队\n    handleAdd() {\n      this.newTeam = {\n        teamId: null,\n        teamName: \"\",\n        virtualCoins: 0,\n        creationDate: null\n      };\n      this.editMode = false;\n      this.dialogVisible = true;\n    },\n    // 删除团队\n    async del(teamId) {\n      try {\n        await axios.delete(`http://localhost:8080/team/delete/${teamId}`);\n        this.$message.success(\"删除成功\");\n        this.load();\n      } catch (error) {\n        console.error(\"删除失败:\", error);\n        this.$message.error(\"删除失败\");\n      }\n    },\n    // 编辑团队\n    handleEdit(row) {\n      this.newTeam = {\n        ...row\n      };\n      this.editMode = true;\n      this.dialogVisible = true;\n    },\n    // 保存团队\n    async saveTeam() {\n      try {\n        if (this.editMode) {\n          await axios.put(`http://localhost:8080/team/update/${this.newTeam.teamId}`, this.newTeam);\n          this.$message.success(\"更新成功\");\n        } else {\n          await axios.post(\"http://localhost:8080/team/create\", this.newTeam);\n          this.$message.success(\"新增成功\");\n        }\n        this.dialogVisible = false;\n        this.load();\n      } catch (error) {\n        console.error(\"保存失败:\", error);\n        this.$message.error(\"保存失败\");\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","searchQuery","teams","currentPage","pageSize","paginatedTeams","dialogVisible","newTeam","teamId","teamName","virtualCoins","creationDate","editMode","created","load","mounted","methods","search","$message","error","filteredTeams","filter","team","toString","includes","length","warning","slice","reset","handlePageChange","response","get","status","console","handlePageSizeChange","newSize","updateDisplayedData","start","end","page","log","handleAdd","del","delete","success","handleEdit","row","saveTeam","put","post"],"sources":["src/views/manage/TeamView.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"search\">\n      <el-input v-model=\"searchQuery\" placeholder=\"请输入团队ID查询\" style=\"width: 200px\"></el-input>\n      <el-button type=\"info\" plain style=\"margin-left: 10px\" @click=\"search\" icon=\"el-icon-zoom-in\">查询</el-button>\n      <el-button type=\"warning\" plain style=\"margin-left: 10px\" @click=\"reset\" icon=\"el-icon-refresh-left\">重置</el-button>\n      <el-button type=\"primary\" plain @click=\"handleAdd\">新增</el-button>\n    </div>\n    <div class=\"table\">\n      <el-table :data=\"paginatedTeams\" @selection-change=\"handleSelectionChange\" border>\n        <el-table-column prop=\"teamId\" label=\"团队ID\" sortable></el-table-column>\n        <el-table-column prop=\"teamName\" label=\"团队名称\"></el-table-column>\n        <el-table-column prop=\"virtualCoins\" label=\"虚拟币数量\"></el-table-column>\n        <el-table-column prop=\"creationDate\" label=\"入住日期\"></el-table-column>\n        <el-table-column label=\"操作\">\n          <template v-slot=\"scope\">\n            <el-button size=\"mini\" type=\"primary\" plain @click=\"handleEdit(scope.row)\">编辑</el-button>\n            <el-button size=\"mini\" type=\"danger\" plain @click=\"del(scope.row.teamId)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n    <el-pagination\n        v-if=\"teams.length > 0\"\n        background\n        layout=\"prev, pager, next,sizes, total, jumper\"\n        :page-size=\"pageSize\"\n        :current-page.sync=\"currentPage\"\n        :total=\"teams.length\"\n        @current-change=\"handlePageChange\"\n        @size-change=\"handlePageSizeChange\"\n    >\n    </el-pagination>\n\n    <el-dialog :title=\"editMode ? '编辑团队' : '新增团队'\" :visible.sync=\"dialogVisible\">\n      <el-form :model=\"newTeam\">\n        <el-form-item label=\"团队名称\">\n          <el-input v-model=\"newTeam.teamName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"虚拟币数量\">\n          <el-input v-model=\"newTeam.virtualCoins\" type=\"number\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"入住日期\">\n          <el-date-picker v-model=\"newTeam.creationDate\" type=\"date\" placeholder=\"选择日期\"></el-date-picker>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"saveTeam\">保存</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      searchQuery: \"\",\n      teams: [], // 所有团队数据\n      currentPage: 1, // 当前页\n      pageSize: 10, // 每页显示数量\n      paginatedTeams: [], // 当前页显示的数据\n      dialogVisible: false,\n      newTeam: {\n        teamId: null,\n        teamName: \"\",\n        virtualCoins: 0,\n        creationDate: null,\n      },\n      editMode: false,\n    };\n  },\n  created() {\n    this.load(); // 页面加载时获取数据\n  },\n  mounted() {\n    this.load();\n  },\n  methods: {\n\n    // 搜索团队\n    search() {\n      if (!this.searchQuery) {\n        this.$message.error(\"请输入团队名字查询\");\n        return;\n      }\n\n      // 在团队数据中筛选包含输入内容的记录\n      const filteredTeams = this.teams.filter((team) =>\n          team.teamName.toString().includes(this.searchQuery)\n      );\n\n      if (filteredTeams.length === 0) {\n        this.$message.warning(\"未找到匹配的团队\");\n      }\n\n      // 更新团队显示数据\n      this.paginatedTeams = filteredTeams.slice(0, this.pageSize);\n      this.currentPage = 1; // 重置当前页\n    },\n\n    // 重置搜索\n    reset() {\n      this.searchQuery = \"\"; // 清空搜索框\n      this.handlePageChange(1); // 恢复到第一页的分页数据\n    },\n\n\n    // 加载数据\n    async load() {\n      try {\n        const response = await axios.get(\"http://localhost:8080/team/list\");\n        if (response.status === 200 && response.data) {\n          this.teams = response.data; // 更新所有团队数据\n          this.handlePageChange(this.currentPage); // 确保分页正确显示\n        }\n      } catch (error) {\n        console.error(\"数据加载失败:\", error);\n      }\n    },\n    handlePageSizeChange(newSize){\n      this.pageSize = newSize;\n      this.currentPage = 1; // 重置到第一页\n      this.updateDisplayedData();\n\n    },\n    updateDisplayedData(){\n      const start = (this.currentPage - 1) * this.pageSize;\n      const end =  start + this.pageSize\n      // 确保分页的队列正确显示数据\n      this.paginatedTeams = this.teams.slice(start, end);\n    },\n    // 分页处理\n    handlePageChange(page) {\n      this.currentPage = page;\n      this.updateDisplayedData()\n\n      // 打印分页数据，调试时使用\n      console.log(\"currentPage:\", this.currentPage);\n      console.log(\"start:\", start, \"end:\", end);\n      console.log(\"paginatedTeams:\", this.paginatedTeams);\n    },\n    // 添加团队\n    handleAdd() {\n      this.newTeam = { teamId: null, teamName: \"\", virtualCoins: 0, creationDate: null };\n      this.editMode = false;\n      this.dialogVisible = true;\n    },\n    // 删除团队\n    async del(teamId) {\n      try {\n        await axios.delete(`http://localhost:8080/team/delete/${teamId}`);\n        this.$message.success(\"删除成功\");\n        this.load();\n      } catch (error) {\n        console.error(\"删除失败:\", error);\n        this.$message.error(\"删除失败\");\n      }\n    },\n    // 编辑团队\n    handleEdit(row) {\n      this.newTeam = { ...row };\n      this.editMode = true;\n      this.dialogVisible = true;\n    },\n    // 保存团队\n    async saveTeam() {\n      try {\n        if (this.editMode) {\n          await axios.put(`http://localhost:8080/team/update/${this.newTeam.teamId}`, this.newTeam);\n          this.$message.success(\"更新成功\");\n        } else {\n          await axios.post(\"http://localhost:8080/team/create\", this.newTeam);\n          this.$message.success(\"新增成功\");\n        }\n        this.dialogVisible = false;\n        this.load();\n      } catch (error) {\n        console.error(\"保存失败:\", error);\n        this.$message.error(\"保存失败\");\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.container {\n  padding: 20px;\n  background-color: #f9f9f9;\n}\n\n.table {\n  margin-bottom: 20px;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}